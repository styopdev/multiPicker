!function(a){var b=function(){this.options={activeClass:"active",valueSource:"index",prePopulate:null,disabled:null,cssOptions:{vertical:!1,quadratic:!1,size:"medium",picker:null,element:null,hover:null,selected:null}},this.type="inline",this.input=null,this.selector=null,this.isPressed=!1,this.lastElem="",this.setEvendHandlers=function(){var a=this;this.items.click(function(){a.select.call(this,a,!1)}),this.items.mousemove(function(b){a.isPressed&&a.lastElem!==b.target&&(a.hover(b),a.lastElem=b.target)}),this.selector.mousedown(function(b){a.isPressed=!0}),this.selector.mouseleave(function(b){a.isPressed=!1}),this.items.mouseup(this.finishHover.bind(this))},this.hover=function(b){var c=a(b.target);this.select.call(c,this,!1)},this.finishHover=function(a){this.lastElem=null,this.isPressed=!1},this.select=function(c,d){var e;if(!a(this).attr("data-disabled"))return e="index"===c.options.valueSource?a(this).index():"data-"===c.options.valueSource.substring(0,5)?a(this).attr(c.options.valueSource):"text"===c.options.valueSource?a(this).text():a(this).val(),c.options.isSingle?(c.clear(),a(this).siblings("."+c.options.activeClass).removeClass(),a(this).addClass(c.options.activeClass),void c.addValue(this,e)):void(a(this).hasClass(c.options.activeClass)?(a(this).removeClass(),c.removeValue(this,e),b.updateClasses(a(this),c.options.activeClass),c.options.onUnselect&&"function"==typeof c.options.onUnselect&&!d&&c.options.onUnselect(this,e)):(a(this).addClass(c.options.activeClass),c.addValue(this,e),b.updateClasses(a(this),c.options.activeClass),c.options.onSelect&&"function"==typeof c.options.onSelect&&!d&&c.options.onSelect(this,e)))},this.addValue=function(b,c){if("inline"===this.type){var d=this.input.val();d&&(d+=","),d+=c,this.input.val(d)}else this.selector.find("input[value='"+a(b).attr("data-value")+"']").attr("checked",!0)},this.removeValue=function(b,c){if("inline"===this.type){var d=this.input.val();d=d.replace(","+c,"").replace(c+",","").replace(c,""),this.input.val(d)}else this.selector.find("input[value='"+a(b).attr("data-value")+"']").attr("checked",!1)},this.clear=function(){"inline"===this.type?this.input.val(""):this.selector.find("input").attr("checked",!1)},this.prePopulate=function(){if(b.isArray(this.options.prePopulate)&&this.options.prePopulate.length)for(var c in this.options.prePopulate){var d=this.options.prePopulate[c],e=this.getElementSelector(d);a(e).index()<0?console.warn("Multipicker: prepopulated element doesn`t found `%s`",d):this.select.call(e,this,!0)}else{var e=this.getElementSelector(this.options.prePopulate);a(e).index()<0?console.warn("Multipicker: prepopulated element doesn`t found`%s`",this.options.prePopulate):this.select.call(e,this,!0)}},this.disable=function(){if(b.isArray(this.options.disabled)&&this.options.disabled.length)for(var c in this.options.disabled){var d=this.options.disabled[c],e=this.getElementSelector(d);a(e).index()<0?console.warn("Multipicker: prepopulated element doesn`t found `%s`",d):a(e).attr("data-disabled",!0)}else{var e=this.getElementSelector(this.options.disabled);a(e).index()<0?console.warn("Multipicker: disabled element doesn`t found`%s`",this.options.disabled):a(e).attr("data-disabled",!0)}},this.getElementSelector=function(a){return"index"!==this.options.valueSource&&this.options.valueSource?"data-"===this.options.valueSource.substring(0,5)?this.selector.find(this.options.selector+"["+this.options.valueSource+"='"+a+"']"):"text"===this.options.valueSource?this.selector.find(this.options.selector+":contains('"+a+"')"):void 0:this.items.eq(a)}};b.isArray=function(a){if("[object Array]"===Object.prototype.toString.call(a))return!0},b.updateClasses=function(b,c){a(b).hasClass(c)?a(b).next().hasClass(c)&&a(b).prev().hasClass(c)?(a(b).next().next().hasClass(c)?a(b).next().attr("class",c+" center-side"):a(b).next().attr("class",c+" right-side"),a(b).prev().prev().hasClass(c)?a(b).prev().attr("class",c+" center-side"):a(b).prev().attr("class",c+" left-side"),a(b).attr("class","active center-side")):a(b).next().hasClass(c)&&!a(b).prev().hasClass(c)?(a(b).next().next().hasClass(c)?a(b).next().attr("class",c+" center-side"):a(b).next().attr("class",c+" right-side"),a(b).attr("class","active left-side")):!a(b).next().hasClass(c)&&a(b).prev().hasClass(c)&&(a(b).prev().prev().hasClass(c)?a(b).prev().attr("class",c+" center-side"):a(b).prev().attr("class",c+" left-side"),a(b).attr("class",c+" right-side")):(a(b).next().hasClass("right-side")&&a(b).next().attr("class",c),a(b).prev().hasClass("left-side")&&a(b).prev().attr("class",c),a(b).prev().hasClass("center-side")&&a(b).prev().attr("class",c+" right-side"),a(b).next().hasClass("center-side")&&a(b).next().attr("class",c+" left-side"))},b.generateStyles=function(b,c){var d="";if(c.picker){d+="#"+b+".checklist {";for(var e in c.picker)d+=e+":"+c.picker[e]+";";d+="}"}if(c.element){d+="#"+b+" > * {";for(var e in c.element)d+=e+":"+c.element[e]+";";d+="}"}if(c.selected){d+="#"+b+" > *.active {";for(var e in c.selected)d+=e+":"+c.selected[e]+";";d+="}"}if(c.hover){d+="#"+b+" > *:hover {";for(var e in c.hover)d+=e+":"+c.hover[e]+";";d+="}"}a("head").append("<style type='text/css'>"+d+"</style>")},a.fn.extend({multiPicker:function(c){a(this).each(function(d,e){var f=new b;if(f.options=Object.assign(f.options,c),f.selector=a(e),"checkbox"===f.options.selector||"radio"===f.options.selector?(f.type=f.options.selector,"radio"===f.type&&(f.options.isSingle=!0),f.selector.find("label").css("display","none"),f.options.disabled?b.isArray(f.options.disabled)||(f.options.disabled=[f.options.disabled]):f.options.disabled=[],a(f.selector).find("input").each(function(b,c){var d=a(c).val(),e=a("label[for='"+a(c).attr("id")+"']").text()||d;f.selector.append("<span data-value='"+d+"'>"+e+"</span>"),a(c).prop("disabled")&&f.options.disabled.push(d)}),f.items=f.selector.find("span"),f.options.valueSource="data-value",f.options.selector="span",f.options.cssOptions.vertical?f.selector.addClass("more-padded-t"):f.selector.addClass("more-padded-l")):(f.options.inputName=f.options.inputName||f.selector.attr("id"),"inline"===f.type&&(a("[name="+f.options.inputName+"]").length?f.input=a("[name="+f.options.inputName+"]"):(f.selector.after("<input type='hidden' name='"+f.options.inputName+"'>"),f.input=a("[name="+f.options.inputName+"]"))),f.items=f.selector.find(f.options.selector)),f.selector.addClass("checklist"),f.options.cssOptions.vertical&&f.selector.addClass("vertical"),f.options.cssOptions.size&&f.selector.addClass(f.options.cssOptions.size),f.options.cssOptions.quadratic&&f.selector.addClass("quadratic"),(f.options.cssOptions.picker||f.options.cssOptions.element||f.options.cssOptions.hover||f.options.cssOptions.selected)&&b.generateStyles(f.selector.attr("id"),f.options.cssOptions),f.options.prePopulate&&b.isArray(f.options.prePopulate)&&f.options.prePopulate.length>1&&f.options.isSingle)throw"Can not prePopulate more then 1 item, with `isSingle` true option";if(f.options.valueSource&&"index"===f.options.valueSource&&"text"===f.options.valueSource&&"data-"!==f.options.valueSource.substring(0,5))throw"Invalid value source";if("data-disabled"===f.options.valueSource)throw"`data-disabled` attribute is reserved, choose another name";(f.options.prePopulate||0===f.options.prePopulate)&&f.prePopulate(),(f.options.disabled||0===f.options.disabled)&&f.disable(),f.selector.attr("ondragstart","return false"),f.setEvendHandlers(),f.options.onInit&&"function"==typeof f.options.onInit&&f.options.onInit()})}})}(jQuery);